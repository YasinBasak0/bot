{"version":3,"sources":["index.ts"],"names":["onServerStarted","bp","db","WebchatDatabase","initialize","onModuleUnmount","events","removeMiddleware","http","deleteRouterForBot","entryPoint","definition","name","menuIcon","fullName","homepage","noInterface","plugins","entry","position"],"mappings":";;;;;;;AAAA;;AAGA;;AACA;;AACA;;;;AAEA,MAAMA,eAAe,GAAG,MAAOC,EAAP,IAA0B;AAChD,QAAMC,EAAE,GAAG,IAAIC,WAAJ,CAAoBF,EAApB,CAAX;AACA,QAAMC,EAAE,CAACE,UAAH,EAAN;AAEA,QAAM,kBAAIH,EAAJ,EAAQC,EAAR,CAAN;AACA,QAAM,qBAAOD,EAAP,EAAWC,EAAX,CAAN;AACD,CAND;;AAQA,MAAMG,eAAe,GAAG,MAAOJ,EAAP,IAA0B;AAChDA,EAAAA,EAAE,CAACK,MAAH,CAAUC,gBAAV,CAA2B,oBAA3B;AACAN,EAAAA,EAAE,CAACO,IAAH,CAAQC,kBAAR,CAA2B,eAA3B;AACD,CAHD;;AAKA,MAAMC,UAAgC,GAAG;AACvCV,EAAAA,eADuC;AAEvCK,EAAAA,eAFuC;AAGvCM,EAAAA,UAAU,EAAE;AACVC,IAAAA,IAAI,EAAE,eADI;AAEVC,IAAAA,QAAQ,EAAE,oBAFA;AAGVC,IAAAA,QAAQ,EAAE,YAHA;AAIVC,IAAAA,QAAQ,EAAE,sBAJA;AAKVC,IAAAA,WAAW,EAAE,IALH;AAMVC,IAAAA,OAAO,EAAE,CAAC;AAAEC,MAAAA,KAAK,EAAE,wBAAT;AAAmCC,MAAAA,QAAQ,EAAE;AAA7C,KAAD;AANC;AAH2B,CAAzC;eAaeT,U","sourceRoot":"/usr/src/app/modules/channel-excel/src/backend","sourcesContent":["import 'bluebird-global'\nimport * as sdk from 'botpress/sdk'\n\nimport api from './api'\nimport WebchatDatabase from './db'\nimport socket from './socket'\n\nconst onServerStarted = async (bp: typeof sdk) => {\n  const db = new WebchatDatabase(bp)\n  await db.initialize()\n\n  await api(bp, db)\n  await socket(bp, db)\n}\n\nconst onModuleUnmount = async (bp: typeof sdk) => {\n  bp.events.removeMiddleware('excel.sendMessages')\n  bp.http.deleteRouterForBot('channel-excel')\n}\n\nconst entryPoint: sdk.ModuleEntryPoint = {\n  onServerStarted,\n  onModuleUnmount,\n  definition: {\n    name: 'channel-excel',\n    menuIcon: 'chrome_reader_mode',\n    fullName: 'Excel Chat',\n    homepage: 'https://botpress.com',\n    noInterface: true,\n    plugins: [{ entry: 'WebBotpressUIInjection', position: 'overlay' }]\n  }\n}\n\nexport default entryPoint\n"]}